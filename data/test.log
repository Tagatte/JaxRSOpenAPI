/*C4*/SET SCHEMA PUBLIC
DISCONNECT
/*C6*/SET SCHEMA PUBLIC
create sequence Concert_SEQ start with 1 increment by 50
create sequence Department_SEQ start with 1 increment by 50
create sequence Employee_SEQ start with 1 increment by 50
create sequence Notification_SEQ start with 1 increment by 50
create sequence Person_SEQ start with 1 increment by 50
create sequence Ticket_SEQ start with 1 increment by 50
create table Concert (date date, endTime integer not null, isCanceled boolean not null, isDeleted boolean not null, isValidated boolean not null, startTime integer not null, admin_id bigint, id bigint not null, organizer_id bigint, placeNumber bigint, price bigint, validationDate timestamp(6), description varchar(255), location varchar(255), musicalGenre varchar(255), name varchar(255), popularity varchar(255), primary key (id))
create table Concert_Person (Concert_id bigint not null, artists_id bigint not null)
create table Department (id bigint not null, name varchar(255), primary key (id))
create table Employee (department_id bigint, id bigint not null, name varchar(255), primary key (id))
create table Notification (concert_id bigint, id bigint not null, content varchar(255), type varchar(255), primary key (id))
create table Person (Type varchar(5) not null, id bigint not null, email varchar(255), firstName varchar(255), lastName varchar(255), phone varchar(255), primary key (id))
create table Person_Concert (Artist_id bigint not null, concerts_id bigint not null)
create table Ticket (dateAchat date, dateAnnulation date, dateRemboursement date, estAnnule boolean not null, estRembourse boolean not null, concert_id bigint, id bigint not null, prix bigint, user_id bigint, primary key (id))
alter table Concert add constraint FKmb245nancpsa6de09i6rrt67y foreign key (admin_id) references Person
alter table Concert add constraint FKegqsh0ssh4t4n4uup1uveofsp foreign key (organizer_id) references Person
alter table Concert_Person add constraint FK30jf39pfyjt2ywofppemr7j41 foreign key (artists_id) references Person
alter table Concert_Person add constraint FKaxul64gujuj9do70vvn3yt5vw foreign key (Concert_id) references Concert
alter table Employee add constraint FK14tijxqry9ml17nk86sqfp561 foreign key (department_id) references Department
alter table Notification add constraint FK4dvk518sk2hy9mu70q9uayd0k foreign key (concert_id) references Concert
alter table Person_Concert add constraint FK725heamheqk3otg1d7gjm8ud0 foreign key (concerts_id) references Concert
alter table Person_Concert add constraint FKpganc5777nyxi8rp7ngkvre28 foreign key (Artist_id) references Person
alter table Ticket add constraint FKin9kj2wiejns9ptuw1pt351kg foreign key (concert_id) references Concert
alter table Ticket add constraint FKkoc12ghipt2wkabmify07bq2i foreign key (user_id) references Person
ALTER SEQUENCE PUBLIC.PERSON_SEQ RESTART WITH 101
ALTER SEQUENCE PUBLIC.CONCERT_SEQ RESTART WITH 51
ALTER SEQUENCE PUBLIC.TICKET_SEQ RESTART WITH 51
ALTER SEQUENCE PUBLIC.NOTIFICATION_SEQ RESTART WITH 51
DISCONNECT
/*C5*/SET SCHEMA PUBLIC
DISCONNECT
/*C8*/SET SCHEMA PUBLIC
ALTER SEQUENCE PUBLIC.PERSON_SEQ RESTART WITH 151
ALTER SEQUENCE PUBLIC.CONCERT_SEQ RESTART WITH 101
ALTER SEQUENCE PUBLIC.TICKET_SEQ RESTART WITH 101
ALTER SEQUENCE PUBLIC.NOTIFICATION_SEQ RESTART WITH 101
DISCONNECT
/*C9*/SET SCHEMA PUBLIC
ALTER SEQUENCE PUBLIC.PERSON_SEQ RESTART WITH 201
ALTER SEQUENCE PUBLIC.CONCERT_SEQ RESTART WITH 151
ALTER SEQUENCE PUBLIC.TICKET_SEQ RESTART WITH 151
ALTER SEQUENCE PUBLIC.NOTIFICATION_SEQ RESTART WITH 151
DISCONNECT
/*C10*/SET SCHEMA PUBLIC
ALTER SEQUENCE PUBLIC.PERSON_SEQ RESTART WITH 251
ALTER SEQUENCE PUBLIC.CONCERT_SEQ RESTART WITH 201
ALTER SEQUENCE PUBLIC.TICKET_SEQ RESTART WITH 201
ALTER SEQUENCE PUBLIC.NOTIFICATION_SEQ RESTART WITH 201
DISCONNECT
/*C11*/SET SCHEMA PUBLIC
drop table if exists Concert cascade 
drop table if exists Concert_Person cascade 
drop table if exists Department cascade 
drop table if exists Employee cascade 
drop table if exists Notification cascade 
drop table if exists Person cascade 
drop table if exists Person_Concert cascade 
drop table if exists Ticket cascade 
drop sequence Concert_SEQ if exists
drop sequence Department_SEQ if exists
drop sequence Employee_SEQ if exists
drop sequence Notification_SEQ if exists
drop sequence Person_SEQ if exists
drop sequence Ticket_SEQ if exists
create sequence Concert_SEQ start with 1 increment by 50
create sequence Department_SEQ start with 1 increment by 50
create sequence Employee_SEQ start with 1 increment by 50
create sequence Notification_SEQ start with 1 increment by 50
create sequence Person_SEQ start with 1 increment by 50
create sequence Ticket_SEQ start with 1 increment by 50
create table Concert (date date, endTime integer not null, isCanceled boolean not null, isDeleted boolean not null, isValidated boolean not null, startTime integer not null, admin_id bigint, id bigint not null, organizer_id bigint, placeNumber bigint, price bigint, validationDate timestamp(6), description varchar(255), location varchar(255), musicalGenre varchar(255), name varchar(255), popularity varchar(255), primary key (id))
create table Concert_Person (Concert_id bigint not null, artists_id bigint not null)
create table Department (id bigint not null, name varchar(255), primary key (id))
create table Employee (department_id bigint, id bigint not null, name varchar(255), primary key (id))
create table Notification (concert_id bigint, id bigint not null, content varchar(255), type varchar(255), primary key (id))
create table Person (id bigint not null, Type varchar(31) not null, email varchar(255), firstName varchar(255), lastName varchar(255), phone varchar(255), primary key (id))
create table Person_Concert (Artist_id bigint not null, concerts_id bigint not null)
create table Ticket (dateAchat date, dateAnnulation date, dateRemboursement date, estAnnule boolean not null, estRembourse boolean not null, concert_id bigint, id bigint not null, prix bigint, user_id bigint, primary key (id))
alter table Concert add constraint FKmb245nancpsa6de09i6rrt67y foreign key (admin_id) references Person
alter table Concert add constraint FKegqsh0ssh4t4n4uup1uveofsp foreign key (organizer_id) references Person
alter table Concert_Person add constraint FK30jf39pfyjt2ywofppemr7j41 foreign key (artists_id) references Person
alter table Concert_Person add constraint FKaxul64gujuj9do70vvn3yt5vw foreign key (Concert_id) references Concert
alter table Employee add constraint FK14tijxqry9ml17nk86sqfp561 foreign key (department_id) references Department
alter table Notification add constraint FK4dvk518sk2hy9mu70q9uayd0k foreign key (concert_id) references Concert
alter table Person_Concert add constraint FK725heamheqk3otg1d7gjm8ud0 foreign key (concerts_id) references Concert
alter table Person_Concert add constraint FKpganc5777nyxi8rp7ngkvre28 foreign key (Artist_id) references Person
alter table Ticket add constraint FKin9kj2wiejns9ptuw1pt351kg foreign key (concert_id) references Concert
alter table Ticket add constraint FKkoc12ghipt2wkabmify07bq2i foreign key (user_id) references Person
INSERT INTO PERSON VALUES(1,'Admin','admin@festival.com',NULL,NULL,NULL)
INSERT INTO PERSON VALUES(2,'Organizer','contact@prod.com',NULL,NULL,NULL)
INSERT INTO PERSON VALUES(3,'Artist','artiste@music.be',NULL,NULL,NULL)
INSERT INTO PERSON VALUES(4,'User','jean.dupont@email.com',NULL,NULL,NULL)
INSERT INTO CONCERT VALUES('2026-02-26',23,FALSE,FALSE,TRUE,20,NULL,1,NULL,15000,75,NULL,NULL,'Bercy, Paris','Pop','Tourn\u00e9e Multitude','High')
INSERT INTO TICKET VALUES('2026-02-26',NULL,NULL,FALSE,FALSE,NULL,1,75,NULL)
INSERT INTO NOTIFICATION VALUES(NULL,1,'Votre commande pour le concert Tourn\u00e9e Multitude est valid\u00e9e.','INFO_ACHAT')
ALTER SEQUENCE PUBLIC.PERSON_SEQ RESTART WITH 101
ALTER SEQUENCE PUBLIC.CONCERT_SEQ RESTART WITH 51
ALTER SEQUENCE PUBLIC.TICKET_SEQ RESTART WITH 51
ALTER SEQUENCE PUBLIC.NOTIFICATION_SEQ RESTART WITH 51
COMMIT
DISCONNECT
/*C7*/SET SCHEMA PUBLIC
DISCONNECT
/*C13*/SET SCHEMA PUBLIC
drop table if exists Concert cascade 
drop table if exists Concert_Person cascade 
drop table if exists Notification cascade 
drop table if exists Person cascade 
drop table if exists Person_Concert cascade 
drop table if exists Ticket cascade 
drop sequence Concert_SEQ if exists
drop sequence Notification_SEQ if exists
drop sequence Person_SEQ if exists
drop sequence Ticket_SEQ if exists
create sequence Concert_SEQ start with 1 increment by 50
create sequence Notification_SEQ start with 1 increment by 50
create sequence Person_SEQ start with 1 increment by 50
create sequence Ticket_SEQ start with 1 increment by 50
create table Concert (date date, endTime integer not null, isCanceled boolean not null, isDeleted boolean not null, isValidated boolean not null, startTime integer not null, admin_id bigint, id bigint not null, organizer_id bigint, placeNumber bigint, price bigint, validationDate timestamp(6), description varchar(255), location varchar(255), musicalGenre varchar(255), name varchar(255), popularity varchar(255), primary key (id))
create table Concert_Person (Concert_id bigint not null, artists_id bigint not null)
create table Notification (concert_id bigint, id bigint not null, content varchar(255), type varchar(255), primary key (id))
create table Person (id bigint not null, Type varchar(31) not null, email varchar(255), firstName varchar(255), lastName varchar(255), phone varchar(255), primary key (id))
create table Person_Concert (Artist_id bigint not null, concerts_id bigint not null)
create table Ticket (dateAchat date, dateAnnulation date, dateRemboursement date, estAnnule boolean not null, estRembourse boolean not null, concert_id bigint, id bigint not null, prix bigint, user_id bigint, primary key (id))
alter table Concert add constraint FKmb245nancpsa6de09i6rrt67y foreign key (admin_id) references Person
alter table Concert add constraint FKegqsh0ssh4t4n4uup1uveofsp foreign key (organizer_id) references Person
alter table Concert_Person add constraint FK30jf39pfyjt2ywofppemr7j41 foreign key (artists_id) references Person
alter table Concert_Person add constraint FKaxul64gujuj9do70vvn3yt5vw foreign key (Concert_id) references Concert
alter table Notification add constraint FK4dvk518sk2hy9mu70q9uayd0k foreign key (concert_id) references Concert
alter table Person_Concert add constraint FK725heamheqk3otg1d7gjm8ud0 foreign key (concerts_id) references Concert
alter table Person_Concert add constraint FKpganc5777nyxi8rp7ngkvre28 foreign key (Artist_id) references Person
alter table Ticket add constraint FKin9kj2wiejns9ptuw1pt351kg foreign key (concert_id) references Concert
alter table Ticket add constraint FKkoc12ghipt2wkabmify07bq2i foreign key (user_id) references Person
INSERT INTO PERSON VALUES(1,'Admin','admin@festival.com',NULL,NULL,NULL)
INSERT INTO PERSON VALUES(2,'Organizer','contact@prod.com',NULL,NULL,NULL)
INSERT INTO PERSON VALUES(3,'Artist','artiste@music.be',NULL,NULL,NULL)
INSERT INTO PERSON VALUES(4,'User','jean.dupont@email.com',NULL,NULL,NULL)
INSERT INTO CONCERT VALUES('2026-02-26',23,FALSE,FALSE,TRUE,20,NULL,1,NULL,15000,75,NULL,NULL,'Bercy, Paris','Pop','Tourn\u00e9e Multitude','High')
INSERT INTO TICKET VALUES('2026-02-26',NULL,NULL,FALSE,FALSE,NULL,1,75,NULL)
INSERT INTO NOTIFICATION VALUES(NULL,1,'Votre commande pour le concert Tourn\u00e9e Multitude est valid\u00e9e.','INFO_ACHAT')
ALTER SEQUENCE PUBLIC.PERSON_SEQ RESTART WITH 101
ALTER SEQUENCE PUBLIC.CONCERT_SEQ RESTART WITH 51
ALTER SEQUENCE PUBLIC.TICKET_SEQ RESTART WITH 51
ALTER SEQUENCE PUBLIC.NOTIFICATION_SEQ RESTART WITH 51
COMMIT
DISCONNECT
/*C14*/SET SCHEMA PUBLIC
drop table if exists Concert cascade 
drop table if exists Concert_Person cascade 
drop table if exists Notification cascade 
drop table if exists Person cascade 
drop table if exists Person_Concert cascade 
drop table if exists Ticket cascade 
drop sequence Concert_SEQ if exists
drop sequence Notification_SEQ if exists
drop sequence Person_SEQ if exists
drop sequence Ticket_SEQ if exists
create sequence Concert_SEQ start with 1 increment by 50
create sequence Notification_SEQ start with 1 increment by 50
create sequence Person_SEQ start with 1 increment by 50
create sequence Ticket_SEQ start with 1 increment by 50
create table Concert (date date, endTime integer not null, isCanceled boolean not null, isDeleted boolean not null, isValidated boolean not null, startTime integer not null, admin_id bigint, id bigint not null, organizer_id bigint, placeNumber bigint, price bigint, validationDate timestamp(6), description varchar(255), location varchar(255), musicalGenre varchar(255), name varchar(255), popularity varchar(255), primary key (id))
create table Concert_Person (Concert_id bigint not null, artists_id bigint not null)
create table Notification (concert_id bigint, id bigint not null, content varchar(255), type varchar(255), primary key (id))
create table Person (id bigint not null, Type varchar(31) not null, email varchar(255), firstName varchar(255), lastName varchar(255), phone varchar(255), primary key (id))
create table Person_Concert (Artist_id bigint not null, concerts_id bigint not null)
create table Ticket (dateAchat date, dateAnnulation date, dateRemboursement date, estAnnule boolean not null, estRembourse boolean not null, concert_id bigint, id bigint not null, prix bigint, user_id bigint, primary key (id))
alter table Concert add constraint FKmb245nancpsa6de09i6rrt67y foreign key (admin_id) references Person
alter table Concert add constraint FKegqsh0ssh4t4n4uup1uveofsp foreign key (organizer_id) references Person
alter table Concert_Person add constraint FK30jf39pfyjt2ywofppemr7j41 foreign key (artists_id) references Person
alter table Concert_Person add constraint FKaxul64gujuj9do70vvn3yt5vw foreign key (Concert_id) references Concert
alter table Notification add constraint FK4dvk518sk2hy9mu70q9uayd0k foreign key (concert_id) references Concert
alter table Person_Concert add constraint FK725heamheqk3otg1d7gjm8ud0 foreign key (concerts_id) references Concert
alter table Person_Concert add constraint FKpganc5777nyxi8rp7ngkvre28 foreign key (Artist_id) references Person
alter table Ticket add constraint FKin9kj2wiejns9ptuw1pt351kg foreign key (concert_id) references Concert
alter table Ticket add constraint FKkoc12ghipt2wkabmify07bq2i foreign key (user_id) references Person
INSERT INTO PERSON VALUES(1,'Admin','admin@festival.com','Marc','Admin','0600000001')
INSERT INTO PERSON VALUES(2,'Organizer','contact@prod.com','Julie','Events','0600000002')
INSERT INTO PERSON VALUES(3,'Artist','artiste@music.be','Stromae','Paul',NULL)
INSERT INTO PERSON VALUES(4,'User','jean.dupont@email.com','Jean','Dupont',NULL)
INSERT INTO CONCERT VALUES('2026-02-26',23,FALSE,FALSE,TRUE,20,NULL,1,NULL,15000,75,NULL,NULL,'Bercy, Paris','Pop','Tourn\u00e9e Multitude','High')
INSERT INTO TICKET VALUES('2026-02-26',NULL,NULL,FALSE,FALSE,NULL,1,75,NULL)
INSERT INTO NOTIFICATION VALUES(NULL,1,'Votre commande pour le concert Tourn\u00e9e Multitude est valid\u00e9e.','INFO_ACHAT')
ALTER SEQUENCE PUBLIC.PERSON_SEQ RESTART WITH 101
ALTER SEQUENCE PUBLIC.CONCERT_SEQ RESTART WITH 51
ALTER SEQUENCE PUBLIC.TICKET_SEQ RESTART WITH 51
ALTER SEQUENCE PUBLIC.NOTIFICATION_SEQ RESTART WITH 51
COMMIT
DISCONNECT
/*C12*/SET SCHEMA PUBLIC
DISCONNECT
